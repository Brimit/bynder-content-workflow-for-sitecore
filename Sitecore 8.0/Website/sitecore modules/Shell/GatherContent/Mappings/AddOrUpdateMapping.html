<script src="/sitecore modules/shell/GatherContent/js/jquery_2.1.1.min.js"></script>
<script src="/sitecore/shell/Controls/Lib/Prototype/prototype.js"></script>
<script src="/sitecore/shell/Controls/Browser.js"></script>
<script src="/sitecore/shell/Controls/Sitecore.js"></script>
<script src="/sitecore modules/shell/GatherContent/js/knockout-3.4.0.js"></script>
<script src="/sitecore modules/shell/GatherContent/js/GatherContent.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery-ui.custom.min.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery.cookie.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery.dynatree.js"></script>
<script src="/sitecore modules/shell/GatherContent/Mappings/AddOrUpdateMapping.js"></script>


<link href="/sitecore modules/shell/GatherContent/css/GatherContent.css" rel="stylesheet" />
<link href="/sitecore modules/shell/GatherContent/css/dynatree/ui.dynatree.css" rel="stylesheet" />
<script type="text/javascript">
    jQuery(document).ready(function () {
        ko.applyBindings(new ViewModel());
    });

</script>
<script type="text/JavaScript" language="javascript">
    if (!window.scSitecore) {
        scSitecore = function () { };
    }
    scSitecore.prototype.Settings = {};
    scSitecore.prototype.Settings.SessionTimeout = 1200000;
</script>

<div class="gathercontent-dialog">
    <!-- ko if: isError -->
    <h1 data-bind="text: errorText"></h1>
    <!-- /ko -->
    <div data-bind="ifnot: isError">
        <p class="fields-mapping-padding">
            Choose the fields you wish to map from GatherContent into Sitecore. Only map the fields you need to import.
        </p>
        <div class="mapping_tabs_wrapper">

            <div class="mapping_heading">
                <div><span><strong>GatherContent:</strong></span></div>
                <p data-bind="text: GcProjectName" class="title_lvl2"></p>
                <p data-bind="text: GcTemplateName" class="title_lvl2"></p>
                <div><span><strong>Mapping title:</strong></span></div>
                <input type="text" data-bind="value: GcMappingTitle" />
                <div><span><strong>Default location:</strong></span></div>
                <input data-bind="value: DefaultLocationText, attr: { 'data-openerid': OpenerId }, click: openDropTree" type="text" />
                <input data-bind="value: DefaultLocation, visible: false, attr: { 'data-openerid': OpenerId }, click: openDropTree" type="text" />
                <div data-bind="attr: { id: OpenerId }" style="position: absolute; left: 200px; top: 200px; width: 300px; height: 400px; z-index: 1000;">
                    <div style="width:300px;height:400px;">
                        <div ata-bind="css: { class: OpenerId }"> </div>
                    </div>
                </div>
            </div>
            <div style="float: right;" class="mapping_heading">
                <div><span><strong>Sitecore Template:</strong></span></div>
                <select class="custom_selected sitecore-template-select" data-bind="options: SitecoreTemplates, optionsText: 'SitrecoreTemplateName', value: SelectedTemplate, event:{ change: $root.templateChanged}"></select>
            </div>
          
            <div style="clear: both;"></div>
            <div data-bind="foreach: { data: Tabs, as: 'tab' } " class="tabs_mapping">
                <div data-bind="text: tab.TabName" class="title_mapping open"></div>
                <div data-bind="foreach: { data: Fields, as: 'field' }" class="content_mapping">
                    <div class="row_mapping_tab">
                        <input type="text" data-bind="value: $root.returnFieldName($data)" disabled />
                        <div class="arrow"></div>
                        <select class="custom_selected" data-bind="options: $root.GetCurrentFields($data), optionsText: 'SitrecoreFieldName', optionsValue: 'SitecoreFieldId', value: SelectedField,"></select>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer_btn">
            <input class="mappings-btn" id="AddMore" type="button" value="Save mapping configuration" data-bind="click: saveMapping" style="margin-top: 15px;" />
            <p>
                You can always change your mapping later.
            </p>
        </div>
    </div>
    <div class="help-link">
        <a href="mailto:support@gathercontent.com">Need help?</a>
    </div>
</div>
<div class="preloader"></div>
