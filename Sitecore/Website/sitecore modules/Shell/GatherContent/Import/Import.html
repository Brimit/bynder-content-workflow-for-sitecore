<link href="/sitecore modules/shell/GatherContent/Import/Import.css" rel="stylesheet" />
<link href="/sitecore modules/shell/GatherContent/css/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery_2.1.1.min.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/knockout-3.4.0.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/GatherContent.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/Import/Import.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/css/bootstrap/js/bootstrap.min.js"></script>

<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function () {
        ko.applyBindings(new ImportManager());
    });
</script>

<div data-bind="if: getMode(1)">
    <select data-bind="options: projects, optionsText: 'name', optionsValue: 'id', value: project, event:{ change: $root.projectChanged}"></select>

    <div>
        <div>FILTER</div>
        <select data-bind="options: statuses, optionsText: 'name', optionsValue: 'id', value: statusFilter, optionsCaption: 'STATUS', event:{ change: $root.filter }"></select>
        <select data-bind="options: templates, optionsText: 'name', optionsValue: 'id', value: templateFilter, optionsCaption: 'TEMPLATE', event:{ change: $root.filter }"></select>
    </div>

    <div>
        <input placeholder="FILTER BY ITEM NAME(SEARCH)" data-bind="value: query, valueUpdate: 'keyup'" autocomplete="off">
    </div>

    <div>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th><input type="checkbox" data-bind="checked: AllChecked" /></th>
                    <th>Select All</th>
                    <th>Title</th>
                    <th>Last updated in GC</th>
                    <th>Path</th>
                    <th>Template</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr data-bind="click: $root.checkRow">
                    <td><input type="checkbox" data-bind="checked: Checked" /></td>
                    <td data-bind="text: Status.name, style: { color: Status.color }"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: LastUpdatedInGC"></td>
                    <td data-bind="text: Breadcrumb"></td>
                    <td data-bind="text: Template.name"></td>
                </tr>
            </tbody>
        </table>

        <div>
            <span data-bind="text: getCheckedCount"></span> Items selected
        </div>

        <input type="button" value="Next>" data-bind="click: buttonClick.bind($data, 2)" />
        <input type="button" value="Close" class="closeButton" data-bind="click: buttonClick.bind($data, 5)" />
    </div>
</div>

<div data-bind="if: getMode(2)">
    <div>
        Confirm import selection (<span data-bind="text: getCheckedCount"></span> items)<br />
        Please review your import selection before importing
    </div>

    <div>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th>Title</th>
                    <th>Path</th>
                    <th>Template</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td data-bind="text: Status.name, style: { color: Status.color }"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Breadcrumb"></td>
                    <td data-bind="text: Template.name"></td>
                </tr>
            </tbody>
        </table>

        <div>
            After successful import change status of item to [<select data-bind="options: statuses, optionsText: 'name', optionsValue: 'id', value: statusFilter, style: { color: $root.getSelectedStatusColor() }, optionsAfterRender: $root.afterStatusesSelectRender"></select>] inside your GatherContent account
        </div>
        <input type="button" value="<Back" data-bind="click: buttonClick.bind($data, 1)" />
        <input type="button" value="Import>" data-bind="click: buttonClick.bind($data, 3)" />
        <input type="button" class="closeButton" value="Close" data-bind="click: buttonClick.bind($data, 5)" />
    </div>
</div>

<div data-bind="if: getMode(3)">
    <div>
        Import in progress<br />
        Please do not close your browser. Depending on the number of items, this can take some time.
    </div>
    <input type="button" value="Next" data-bind="click: buttonClick.bind($data, 4)" />
</div>

<div data-bind="if: getMode(4)">
    <div>Import complete: Results</div>

    <div>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th>Title</th>
                    <th></th>
                    <th>Template</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td data-bind="text: Status.name, style: { color: Status.color }"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Template.name"></td>
                </tr>
            </tbody>
        </table>

        <input type="button" class="closeButton" data-bind="click: buttonClick.bind($data, 5)" value="Close"/>
    </div>
</div>