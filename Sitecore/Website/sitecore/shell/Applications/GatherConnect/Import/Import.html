<link src="/sitecore/shell/Applications/GatherConnect/Import/Import.css" rel="stylesheet" />
<script src="/sitecore/shell/client/Speak/Assets/lib/core/1.1/deps/jQuery/jquery-2.1.1.min.js"></script>
<script type="text/javascript" language="javascript" src="/js/knockout-3.4.0.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore/shell/Applications/GatherConnect/Import/Import.js"></script>

<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function () {
        ko.applyBindings(new ImportManager());
    });
</script>

<div data-bind="visible: getMode(1)">
    1
    <select data-bind="options: projects, optionsText: 'Name', optionsValue: 'Id', value: project, event:{ change: $root.projectChanged}"></select>

    <div>
        <div>FILTER</div>
        <select data-bind="options: statuses, optionsText: 'Title', optionsValue: 'Id', value: statusFilter, optionsCaption: 'STATUS', event:{ change: $root.filter }"></select>
        <select data-bind="options: templates, optionsText: 'Title', optionsValue: 'Id', value: templateFilter, optionsCaption: 'TEMPLATE', event:{ change: $root.filter }"></select>
    </div>

    <div>
        <input placeholder="FILTER BY ITEM NAME(SEARCH)" data-bind="value: query, valueUpdate: 'keyup'" autocomplete="off">
    </div>

    <div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th><input type="checkbox" data-bind="checked: AllChecked" /></th>
                    <th>Select All</th>
                    <th>Title</th>
                    <th>Last updated in GC</th>
                    <th>Last imported</th>
                    <th>Template</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td><input type="checkbox" data-bind="checked: Checked" /></td>
                    <td data-bind="text: Status.Title"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: LastUpdatedInGC"></td>
                    <td data-bind="text: LastImported"></td>
                    <td data-bind="text: Template.Title"></td>
                </tr>
            </tbody>
        </table>

        <div>
            <span data-bind="text: getCheckedCount"></span> Items selected
        </div>

        <input type="button" value="Next" data-bind="click: buttonClick.bind($data, 2)" />
        <input type="button" value="Close" data-bind="click: buttonClick.bind($data, 5)" />
    </div>
</div>

<div data-bind="visible: getMode(2)">
    2
    <div>
        Confirm import selection (<span data-bind="text: getCheckedCount"></span> items)<br />
        Please review your import selection before importing
    </div>

    <div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th>Title</th>
                    <th>Template</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td data-bind="text: Status.Title"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Template.Title"></td>
                </tr>
            </tbody>
        </table>

        <div>
            After successful import change status of item to [<select data-bind="options: statuses, optionsText: 'Title', optionsValue: 'Id', value: statusFilter"></select>] inside your GatherContent account
        </div>
        <input type="button" value="Import" data-bind="click: buttonClick.bind($data, 3)" />
        <input type="button" value="Close" data-bind="click: buttonClick.bind($data, 5)" />
    </div>
</div>

<div data-bind="visible: getMode(3)">
    3
    <div>
        Import in progress<br />
        Please do not close your browser. Depending on the number of items, this can take some time.
    </div>
    <input type="button" value="Next" data-bind="click: buttonClick.bind($data, 4)" />
</div>

<div data-bind="visible: getMode(4)">
    4
    <div>Import complete: Results</div>

    <div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th>Title</th>
                    <th></th>
                    <th>Template</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td data-bind="text: Status.Title"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Template.Title"></td>
                </tr>
            </tbody>
        </table>

        <input type="button" value="Close" data-bind="click: buttonClick.bind($data, 5)" />
    </div>
</div>